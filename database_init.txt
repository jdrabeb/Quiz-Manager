DROP TABLE IF EXISTS MCQCHOICES;
DROP TABLE IF EXISTS MCQQUESTIONS;
DROP TABLE IF EXISTS OPENQUESTIONS;
DROP TABLE IF EXISTS TOPICS;
DROP TABLE IF EXISTS USERS;
CREATE TABLE USERS (
	ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	NAME VARCHAR(255) NOT NULL,
	PASSWORD VARCHAR(255) NOT NULL,
	IDENTIFIANT VARCHAR(255) NOT NULL,
	ISADMIN BOOLEAN NOT NULL
);

CREATE TABLE TOPICS (
	TOPIC_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	TOPIC VARCHAR(255) NOT NULL
);

CREATE TABLE MCQQUESTIONS (
	QUESTION_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	QUESTION VARCHAR(255) NOT NULL,
	DIFFICULTY INT NOT NULL,
	TOPIC_ID INT NOT NULL,
        FOREIGN KEY (TOPIC_ID) REFERENCES TOPICS(TOPIC_ID)
);

CREATE TABLE OPENQUESTIONS (
	OPENQUESTION_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	QUESTION VARCHAR(255) NOT NULL,
	DIFFICULTY INT NOT NULL,
	TOPIC_ID INT NOT NULL,
        FOREIGN KEY (TOPIC_ID) REFERENCES TOPICS(TOPIC_ID)
);

CREATE TABLE MCQCHOICES (
	CHOICE_ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	CHOICE VARCHAR(255) NOT NULL,
	ISVALID BOOLEAN NOT NULL,
	QUESTION_ID INT NOT NULL,
        FOREIGN KEY (QUESTION_ID) REFERENCES MCQQUESTIONS(QUESTION_ID)
);

INSERT INTO USERS(NAME, PASSWORD, IDENTIFIANT, ISADMIN) VALUES('admin','admin','no id',TRUE);
INSERT INTO USERS(NAME, PASSWORD, IDENTIFIANT, ISADMIN) VALUES('johndoe','password','id123',FALSE);
